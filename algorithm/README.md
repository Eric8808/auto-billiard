# 撞球演算法
## 1.計算 alpha 角(碰撞角度)
計算洞口至被撞擊球軌跡與白球至被撞擊球軌跡的夾角

若 alpha=0 則為直線碰撞，alpha=90 則無法碰撞，因此可以分為下列:bulb:兩種狀況:

1. 0 < alpha < 90 : 可行的解法
2. alpha > 90 : 不可行的解法，排除此解法

![](https://i.imgur.com/fgd6DFj.png)

## 2.判斷擊球軌跡上是否有球
### :bulb:狀況一: 白球至被撞擊球軌跡上有障礙物

假設要撞擊 "12號球入袋" ，因為白球至12號球的軌跡上有綠球擋住，在此狀況下撞擊12號球的解法會被排除。

![](https://i.imgur.com/FCQmtsI.png)


### :bulb:狀況二: 被撞擊球至洞口軌跡上有障礙物

假設要撞擊 "12號球入袋" ，因為12號球至洞口的軌跡上有綠球擋住，在此狀況下撞擊12號球的解法會被排除。
![](https://i.imgur.com/dxkbF5X.png)



## 3. 選擇最佳解法
篩選出所有可能的解法後，依照下列三個參數來找出:bulb:最佳的解法:

1. alpha 角較小者
2. 白球與被撞擊球的距離
3. 被撞擊球與洞口的距離 

將這三個參數給定各自的權重來計算加權平均數，分數最高的解法則為最佳解。

下圖為範例，解 1 的 alpha角、白球與被撞擊球的距離、被撞擊球與洞口的距離皆比解 2 來的小，因此會選擇解 1 為最佳解。

![](https://i.imgur.com/WvHx3aV.png)


## 4. 使用 Convex Hull 的狀況

若出現 Step1、Step2 都沒有解的情形，則會計算出檯面上所有球的 Convex Hull，並找出 Convex Hull 的重心作為白球撞擊的目標。

![](https://i.imgur.com/pkiWJMN.png)





